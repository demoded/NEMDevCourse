"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const nem_library_1 = require("nem-library");
nem_library_1.NEMLibrary.bootstrap(nem_library_1.NetworkTypes.TEST_NET);
exports.MOSAIC_NAME = 'demodedcoin';
exports.createSimpleWallet = (password) => {
    const pass = new nem_library_1.Password(password);
    return nem_library_1.SimpleWallet.create(`${exports.MOSAIC_NAME}-wallet`, pass);
};
exports.getAccountBalances = (account) => {
    return new Promise((resolve, reject) => {
        const accountHttp = new nem_library_1.AccountHttp();
        accountHttp.getMosaicOwnedByAddress(account.address).subscribe(mosaics => {
            resolve(mosaics);
        }, err => {
            reject(err);
        });
    });
};
exports.mosaicBalance = (balances) => {
    const found = balances.find((mosaic) => {
        return mosaic.mosaicId.name === exports.MOSAIC_NAME;
    });
    if (!found)
        return 0;
    return found.quantity;
};
exports.xemBalance = (balances) => {
    const xemMosaic = balances.find((mosaic) => {
        return mosaic.mosaicId.name === 'xem';
    });
    if (!xemMosaic)
        return 0;
    return xemMosaic.quantity;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZDQUEyRztBQUUzRyx3QkFBVSxDQUFDLFNBQVMsQ0FBQywwQkFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBRS9CLFFBQUEsV0FBVyxHQUFHLGFBQWEsQ0FBQTtBQUUzQixRQUFBLGtCQUFrQixHQUFHLENBQUMsUUFBZ0IsRUFBZSxFQUFFO0lBQ2pFLE1BQU0sSUFBSSxHQUFHLElBQUksc0JBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNwQyxPQUFPLDBCQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsbUJBQVcsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzdELENBQUMsQ0FBQztBQUVXLFFBQUEsa0JBQWtCLEdBQUcsQ0FBQyxPQUFnQixFQUEwQixFQUFFO0lBQzNFLE9BQU8sSUFBSSxPQUFPLENBQWdCLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ2xELE1BQU0sV0FBVyxHQUFHLElBQUkseUJBQVcsRUFBRSxDQUFDO1FBQ3RDLFdBQVcsQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3JFLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUVyQixDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUU7WUFDTCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQztBQUVXLFFBQUEsYUFBYSxHQUFHLENBQUMsUUFBdUIsRUFBVSxFQUFFO0lBQzdELE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtRQUNuQyxPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLG1CQUFXLENBQUM7SUFDaEQsQ0FBQyxDQUFDLENBQUM7SUFDSCxJQUFJLENBQUMsS0FBSztRQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3JCLE9BQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQztBQUMxQixDQUFDLENBQUM7QUFFVyxRQUFBLFVBQVUsR0FBRyxDQUFDLFFBQXVCLEVBQVUsRUFBRTtJQUMxRCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7UUFDdkMsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxLQUFLLENBQUM7SUFDMUMsQ0FBQyxDQUFDLENBQUM7SUFDSCxJQUFJLENBQUMsU0FBUztRQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3pCLE9BQU8sU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUM5QixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0FjY291bnQsIEFjY291bnRIdHRwLCBORU1MaWJyYXJ5LCBOZXR3b3JrVHlwZXMsIFBhc3N3b3JkLCBTaW1wbGVXYWxsZXQsIE1vc2FpY30gZnJvbSBcIm5lbS1saWJyYXJ5XCI7XHJcblxyXG5ORU1MaWJyYXJ5LmJvb3RzdHJhcChOZXR3b3JrVHlwZXMuVEVTVF9ORVQpO1xyXG5cclxuZXhwb3J0IGNvbnN0IE1PU0FJQ19OQU1FID0gJ2RlbW9kZWRjb2luJ1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNpbXBsZVdhbGxldCA9IChwYXNzd29yZDogc3RyaW5nKTpTaW1wbGVXYWxsZXQgPT4ge1xyXG4gICBjb25zdCBwYXNzID0gbmV3IFBhc3N3b3JkKHBhc3N3b3JkKTtcclxuICAgcmV0dXJuIFNpbXBsZVdhbGxldC5jcmVhdGUoYCR7TU9TQUlDX05BTUV9LXdhbGxldGAsIHBhc3MpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEFjY291bnRCYWxhbmNlcyA9IChhY2NvdW50OiBBY2NvdW50KTogUHJvbWlzZTxBcnJheTxNb3NhaWM+PiA9PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8QXJyYXk8TW9zYWljPj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFjY291bnRIdHRwID0gbmV3IEFjY291bnRIdHRwKCk7XHJcbiAgICAgICAgYWNjb3VudEh0dHAuZ2V0TW9zYWljT3duZWRCeUFkZHJlc3MoYWNjb3VudC5hZGRyZXNzKS5zdWJzY3JpYmUobW9zYWljcyA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUobW9zYWljcyk7XHJcblxyXG4gICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbW9zYWljQmFsYW5jZSA9IChiYWxhbmNlczogQXJyYXk8TW9zYWljPik6IG51bWJlciA9PiB7XHJcbiAgICBjb25zdCBmb3VuZCA9IGJhbGFuY2VzLmZpbmQoKG1vc2FpYykgPT4ge1xyXG4gICAgICAgIHJldHVybiBtb3NhaWMubW9zYWljSWQubmFtZSA9PT0gTU9TQUlDX05BTUU7XHJcbiAgICB9KTtcclxuICAgIGlmICghZm91bmQpIHJldHVybiAwO1xyXG4gICAgcmV0dXJuIGZvdW5kLnF1YW50aXR5O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHhlbUJhbGFuY2UgPSAoYmFsYW5jZXM6IEFycmF5PE1vc2FpYz4pOiBudW1iZXIgPT4ge1xyXG4gICAgY29uc3QgeGVtTW9zYWljID0gYmFsYW5jZXMuZmluZCgobW9zYWljKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG1vc2FpYy5tb3NhaWNJZC5uYW1lID09PSAneGVtJztcclxuICAgIH0pO1xyXG4gICAgaWYgKCF4ZW1Nb3NhaWMpIHJldHVybiAwO1xyXG4gICAgcmV0dXJuIHhlbU1vc2FpYy5xdWFudGl0eTtcclxufTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLyBzb21lIHRyYWluaW5nIGNvZGUgLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIGNvbnN0IGZpcnN0V2FsbGV0ID0gY3JlYXRlU2ltcGxlV2FsbGV0KCcxMm15c2ltcGxld2FsbGV0NDgnKTtcclxuLy9cclxuLy8gY29uc29sZS5sb2coZmlyc3RXYWxsZXQpO1xyXG4vL1xyXG4vLyBjb25zdCBteUFjY291bnQgPSBmaXJzdFdhbGxldC5vcGVuKG5ldyBQYXNzd29yZCgnMTJteXNpbXBsZXdhbGxldDQ4JykpO1xyXG4vL1xyXG4vLyBjb25zb2xlLmxvZyhteUFjY291bnQpO1xyXG5cclxuLy8gdGVzdCB0byBnZXQgdHJhbnNhY3Rpb25zXHJcbi8vIGNvbnN0IGFjY291bnRIdHRwID0gbmV3IEFjY291bnRIdHRwKCk7XHJcbi8vIGFjY291bnRIdHRwLmFsbFRyYW5zYWN0aW9ucyhuZXcgQWRkcmVzcygnVEJVQkpHTllQS0g3NUZJTlY2TkJDUVVWTktJQVJYUlRKRFhZU1BDMycpKVxyXG4vLyAuc3Vic2NyaWJlKGFsbFRyYW5zYWN0aW9ucyA9PiB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhhbGxUcmFuc2FjdGlvbnMpO1xyXG4vLyB9KVxyXG5cclxuXHJcbiJdfQ==